import SwiftUI

struct ContentView: View {
    @State private var tabHeight: CGFloat = 300 // Default height
    
    var body: some View {
        VStack {
            TabView {
                ChildView(text: "Short Content", color: .blue)
                    .background(GeometryReader { proxy in
                        Color.clear
                            .onAppear { tabHeight = proxy.size.height }
                            .onChange(of: proxy.size.height) { newHeight in
                                tabHeight = newHeight
                            }
                    })
                    .tag(0)
                
                ChildView(text: "Longer Content\nMultiple Lines", color: .red)
                    .background(GeometryReader { proxy in
                        Color.clear
                            .onAppear { tabHeight = proxy.size.height }
                            .onChange(of: proxy.size.height) { newHeight in
                                tabHeight = newHeight
                            }
                    })
                    .tag(1)
            }
            .tabViewStyle(PageTabViewStyle())
            .frame(height: tabHeight) // Set dynamic height
        }
    }
}

struct ChildView: View {
    let text: String
    let color: Color

    var body: some View {
        VStack {
            Text(text)
                .padding()
                .background(color.opacity(0.3))
                .cornerRadius(10)
        }
    }
}