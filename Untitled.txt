import Foundation

@Sendable
final class DateFormatterUtility {
    static let shared = DateFormatterUtility()
    
    private let queue = DispatchQueue(label: "com.dateFormatterUtility.queue", attributes: .concurrent)
    private var formatter = DateFormatter()
    
    private init() {} // Prevent external instantiation
    
    func format(date timestamp: TimeInterval, format: String = "yyyy-MM-dd HH:mm:ss", timeZone: TimeZone = .current) -> String {
        queue.sync {
            formatter.dateFormat = format
            formatter.timeZone = timeZone
            return formatter.string(from: Date(timeIntervalSince1970: timestamp))
        }
    }
}